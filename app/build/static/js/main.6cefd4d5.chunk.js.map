{"version":3,"sources":["utils/webRTCHandler.js","IntroductionPage/ConnectingButton.js","IntroductionPage/ConnectingButtons.js","store/actions.js","IntroductionPage/IntroductionPage.js","resources/images/logo.png","JoinRoomPage/JoinRoomTitle.js","JoinRoomPage/JoinRoomInputs.js","JoinRoomPage/OnlyWithAudioCheckbox.js","resources/images/check.png","JoinRoomPage/ErrorMessage.js","JoinRoomPage/JoinRoomButtons.js","utils/api.js","JoinRoomPage/JoinRoomContent.js","JoinRoomPage/JoinRoomPage.js","RoomPage/ChatSection/ChatLabel.js","RoomPage/ChatSection/Messages.js","resources/images/sendMessageButton.svg","store/reducer.js","store/store.js","utils/directMessages.js","utils/wss.js","utils/turn.js","RoomPage/ChatSection/NewMessage.js","RoomPage/ChatSection/ChatSection.js","RoomPage/ParticipantsSection/ParticipantsLabel.js","RoomPage/ParticipantsSection/Participants.js","RoomPage/ParticipantsSection/DirectChat/MessagesContainer.js","RoomPage/ParticipantsSection/DirectChat/NewMessage.js","RoomPage/ParticipantsSection/DirectChat/ConversationNotChosen.js","RoomPage/ParticipantsSection/DirectChat/DirectChatHeader.js","RoomPage/ParticipantsSection/DirectChat/DirectChat.js","RoomPage/ParticipantsSection/ParticipantsSection.js","resources/images/camera.svg","resources/images/cameraOff.svg","RoomPage/VideoSection/CameraButton.js","RoomPage/VideoSection/LeaveRoomButton.js","resources/images/mic.svg","resources/images/micOff.svg","RoomPage/VideoSection/MicButton.js","resources/images/switchToScreenSharing.svg","RoomPage/VideoSection/LocalScreenSharingPreview.js","RoomPage/VideoSection/SwitchToScreenSharingButton.js","RoomPage/VideoSection/VideoButtons.js","RoomPage/VideoSection/VideoSection.js","RoomPage/RoomLabel.js","RoomPage/Overlay.js","RoomPage/RoomPage.js","App.js","serviceWorker.js","index.js"],"names":["localStream","ConnectingButton","_ref","_ref$createRoomButton","createRoomButton","buttonText","onClickHandler","buttonClass","_jsx","className","onClick","children","ConnectingButtons","history","useHistory","_jsxs","push","Actions","SET_IS_ROOM_HOST","SET_CONNECT_ONLY_WITH_AUDIO","SET_IDENTITY","SET_ROOM_ID","SET_SHOW_OVERLAY","SET_PARTICIPANTS","SET_MESSAGES","SET_ACTIVE_CONVERSATION","SET_DIRECT_CHAT_HISTORY","SET_SOCKET_ID","setIsRoomHost","isRoomHost","type","setRoomId","roomId","setDirectChatHistory","directChatHistory","connect","dispatch","setIsRoomHostAction","useEffect","src","JoinRoomTitle","titleText","Input","placeholder","value","changeHandler","onChange","JoinRoomInputs","props","roomIdValue","setRoomIdValue","nameValue","setNameValue","event","target","OnlyWithAudioCheckbox","connectOnlyWithAudio","setConnectOnlyWithAudio","ErrorMessage","errorMessage","Button","_ref$cancelButton","cancelButton","JoinRoomButtons","_ref2","handleJoinRoom","successButtonText","serverApi","getRoomExists","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_context","prev","next","axios","get","concat","sent","abrupt","data","stop","_x","apply","arguments","getTURNCredentials","_callee2","_context2","state","_objectSpread","onlyWithAudio","setIdentityAction","identity","setIdentity","setRoomIdAction","_useState","useState","_useState2","_slicedToArray","_useState3","_useState4","_useState5","_useState6","setErrorMessage","createRoom","joinRoom","responseMessage","roomExists","full","_Fragment","search","useLocation","URLSearchParams","JoinRoomContent","ChatLabel","Message","author","content","sameAuthor","messageCreatedByMe","alignClass","authorText","contentAdditionalStyles","messages","map","message","index","initState","showOverlay","participants","activeConversation","socketId","reducer","length","undefined","action","store","configureStore","appendMessageToChatHistory","userSocketId","chatHistory","_toConsumableArray","getState","userChatHistory","find","h","newDirectMessage","isAuthor","messageContent","newUserChatHistory","newChatHistory","filter","socket","connectWithSocketIOServer","io","on","console","log","id","connectedUsers","connUserSocketId","webRTCHandler","emit","receiverSocketId","authorSocketId","appendNewMessageToChatHistory","createNewRoom","onlyAudio","TURNIceServers","fetchTURNCredentials","_responseData$token","responseData","api","token","iceServers","defaultConstraints","audio","video","width","height","onlyAudioConstraints","getLocalPreviewAndInitRoomConnection","constraints","_args","navigator","mediaDevices","getUserMedia","then","stream","showLocalVideoPreview","wss","catch","err","_x2","peers","streams","getConfiguration","turnIceServers","urls","warn","prepareNewPeerConnection","isInitiator","configuration","Peer","initiator","config","channelName","signal","addStream","messageData","JSON","parse","appendNewMessage","handleSignalingData","removePeerConnection","videoContainer","document","getElementById","videoEl","srcObject","getTracks","forEach","t","removeChild","parentNode","destroy","videosContainer","classList","add","createElement","videoElement","autoplay","muted","onloadedmetadata","play","appendChild","getAudioOnlyLabel","addEventListener","contains","remove","participant","p","style","position","labelContainer","label","innerHTML","toggleScreenShare","isScreenSharingActive","switchVideoTracks","socket_id","index2","kind","replaceTrack","setMessages","NewMessage","setMessage","sendMessage","stringifiedMessageData","stringify","send","onKeyDown","key","preventDefault","SendMessageButton","ChatSection","Messages","ParticipantsLabel","SingleParticipant","lastItem","setActiveConversationAction","setActiveConversation","SingleMessage","messageStyling","containerStyling","MessagesContainer","scrollRef","useRef","current","scrollIntoView","behavior","ref","sendMessageButton","ConversationNotChosen","DirectChatHeader","getDirectChatHistory","ParticipantsSection","Participants","DirectChat","CameraButton","isLocalVideoDisabled","setIsLocalVideoDisabled","CameraButtonImgOff","CameraButtonImg","isDisabled","getVideoTracks","enabled","LeaveRoomButton","siteUrl","window","location","origin","href","MicButton","isMicMuted","setIsMicMuted","MicButtonImgOff","MicButtonImg","isMuted","getAudioTracks","LocalScreenSharingPreview","localPreviewRef","autoPlay","SwitchToScreenSharingButton","setIsScreenSharingActive","screenSharingStream","setScreenSharingStream","handleScreenShareToggle","getDisplayMedia","t0","SwitchImg","VideoSection","VideoButtons","RoomLabel","Overlay","App","Router","Switch","Route","path","JoinRoomPage","RoomPage","IntroductionPage","Boolean","hostname","match","ReactDOM","render","React","StrictMode","Provider","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.6cefd4d5.chunk.js","sourcesContent":["import { setShowOverlay, setMessages } from \"../store/actions\";\r\nimport store from \"../store/store\";\r\nimport * as wss from \"./wss\";\r\nimport Peer from \"simple-peer\";\r\nimport { fetchTURNCredentials, getTurnIceServers } from \"./turn\";\r\n\r\nconst defaultConstraints = {\r\n  audio: true,\r\n  video: {\r\n    width: \"480\",\r\n    height: \"360\",\r\n  },\r\n};\r\n\r\nconst onlyAudioConstraints = {\r\n  audio: true,\r\n  video: false,\r\n};\r\n\r\nlet localStream;\r\n\r\nexport const getLocalPreviewAndInitRoomConnection = async (\r\n  isRoomHost,\r\n  identity,\r\n  roomId = null,\r\n  onlyAudio\r\n) => {\r\n  await fetchTURNCredentials();\r\n\r\n  const constraints = onlyAudio ? onlyAudioConstraints : defaultConstraints;\r\n\r\n  navigator.mediaDevices\r\n    .getUserMedia(constraints)\r\n    .then((stream) => {\r\n      console.log(\"successfuly received local stream\");\r\n      localStream = stream;\r\n      showLocalVideoPreview(localStream);\r\n\r\n      // dispatch an action to hide overlay\r\n      store.dispatch(setShowOverlay(false));\r\n\r\n      isRoomHost\r\n        ? wss.createNewRoom(identity, onlyAudio)\r\n        : wss.joinRoom(identity, roomId, onlyAudio);\r\n    })\r\n    .catch((err) => {\r\n      console.log(\r\n        \"error occurred when trying to get an access to local stream\"\r\n      );\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nlet peers = {};\r\nlet streams = [];\r\n\r\nconst getConfiguration = () => {\r\n  const turnIceServers = getTurnIceServers();\r\n\r\n  if (turnIceServers) {\r\n    return {\r\n      iceServers: [\r\n        {\r\n          urls: \"stun:stun.l.google.com:19302\",\r\n        },\r\n        ...turnIceServers,\r\n      ],\r\n    };\r\n  } else {\r\n    console.warn(\"Using only STUN server\");\r\n    return {\r\n      iceServers: [\r\n        {\r\n          urls: \"stun:stun.l.google.com:19302\",\r\n        },\r\n      ],\r\n    };\r\n  }\r\n};\r\n\r\nconst messengerChannel = \"messenger\";\r\n\r\nexport const prepareNewPeerConnection = (connUserSocketId, isInitiator) => {\r\n  const configuration = getConfiguration();\r\n\r\n  peers[connUserSocketId] = new Peer({\r\n    initiator: isInitiator,\r\n    config: configuration,\r\n    stream: localStream,\r\n    channelName: messengerChannel,\r\n  });\r\n\r\n  peers[connUserSocketId].on(\"signal\", (data) => {\r\n    // webRTC offer, webRTC Answer (SDP informations), ice candidates\r\n\r\n    const signalData = {\r\n      signal: data,\r\n      connUserSocketId: connUserSocketId,\r\n    };\r\n\r\n    wss.signalPeerData(signalData);\r\n  });\r\n\r\n  peers[connUserSocketId].on(\"stream\", (stream) => {\r\n    console.log(\"new stream came\");\r\n\r\n    addStream(stream, connUserSocketId);\r\n    streams = [...streams, stream];\r\n  });\r\n\r\n  peers[connUserSocketId].on(\"data\", (data) => {\r\n    const messageData = JSON.parse(data);\r\n    appendNewMessage(messageData);\r\n  });\r\n};\r\n\r\nexport const handleSignalingData = (data) => {\r\n  //add signaling data to peer connection\r\n  peers[data.connUserSocketId].signal(data.signal);\r\n};\r\n\r\nexport const removePeerConnection = (data) => {\r\n  const { socketId } = data;\r\n  const videoContainer = document.getElementById(socketId);\r\n  const videoEl = document.getElementById(`${socketId}-video`);\r\n\r\n  if (videoContainer && videoEl) {\r\n    const tracks = videoEl.srcObject.getTracks();\r\n\r\n    tracks.forEach((t) => t.stop());\r\n\r\n    videoEl.srcObject = null;\r\n    videoContainer.removeChild(videoEl);\r\n\r\n    videoContainer.parentNode.removeChild(videoContainer);\r\n\r\n    if (peers[socketId]) {\r\n      peers[socketId].destroy();\r\n    }\r\n    delete peers[socketId];\r\n  }\r\n};\r\n\r\n////////////////////////////////// UI Videos //////////////////////////////////\r\nconst showLocalVideoPreview = (stream) => {\r\n  const videosContainer = document.getElementById(\"videos_portal\");\r\n  videosContainer.classList.add(\"videos_portal_styles\");\r\n  const videoContainer = document.createElement(\"div\");\r\n  videoContainer.classList.add(\"video_track_container\");\r\n  const videoElement = document.createElement(\"video\");\r\n  videoElement.autoplay = true;\r\n  videoElement.muted = true;\r\n  videoElement.srcObject = stream;\r\n\r\n  videoElement.onloadedmetadata = () => {\r\n    videoElement.play();\r\n  };\r\n\r\n  videoContainer.appendChild(videoElement);\r\n\r\n  if (store.getState().connectOnlyWithAudio) {\r\n    videoContainer.appendChild(getAudioOnlyLabel());\r\n  }\r\n\r\n  videosContainer.appendChild(videoContainer);\r\n};\r\n\r\nconst addStream = (stream, connUserSocketId) => {\r\n  //display incoming stream\r\n  const videosContainer = document.getElementById(\"videos_portal\");\r\n  const videoContainer = document.createElement(\"div\");\r\n  videoContainer.id = connUserSocketId;\r\n\r\n  videoContainer.classList.add(\"video_track_container\");\r\n  const videoElement = document.createElement(\"video\");\r\n  videoElement.autoplay = true;\r\n  videoElement.srcObject = stream;\r\n  videoElement.id = `${connUserSocketId}-video`;\r\n\r\n  videoElement.onloadedmetadata = () => {\r\n    videoElement.play();\r\n  };\r\n\r\n  videoElement.addEventListener(\"click\", () => {\r\n    if (videoElement.classList.contains(\"full_screen\")) {\r\n      videoElement.classList.remove(\"full_screen\");\r\n    } else {\r\n      videoElement.classList.add(\"full_screen\");\r\n    }\r\n  });\r\n\r\n  videoContainer.appendChild(videoElement);\r\n\r\n  // check if other user connected only with audio\r\n  const participants = store.getState().participants;\r\n\r\n  const participant = participants.find((p) => p.socketId === connUserSocketId);\r\n  console.log(participant);\r\n  if (participant?.onlyAudio) {\r\n    videoContainer.appendChild(getAudioOnlyLabel(participant.identity));\r\n  } else {\r\n    videoContainer.style.position = \"static\";\r\n  }\r\n\r\n  videosContainer.appendChild(videoContainer);\r\n};\r\n\r\nconst getAudioOnlyLabel = (identity = \"\") => {\r\n  const labelContainer = document.createElement(\"div\");\r\n  labelContainer.classList.add(\"label_only_audio_container\");\r\n\r\n  const label = document.createElement(\"p\");\r\n  label.classList.add(\"label_only_audio_text\");\r\n  label.innerHTML = `Only audio ${identity}`;\r\n\r\n  labelContainer.appendChild(label);\r\n  return labelContainer;\r\n};\r\n\r\n////////////////////////////////// Buttons logic //////////////////////////////////\r\n\r\nexport const toggleMic = (isMuted) => {\r\n  localStream.getAudioTracks()[0].enabled = isMuted ? true : false;\r\n};\r\n\r\nexport const toggleCamera = (isDisabled) => {\r\n  localStream.getVideoTracks()[0].enabled = isDisabled ? true : false;\r\n};\r\n\r\nexport const toggleScreenShare = (\r\n  isScreenSharingActive,\r\n  screenSharingStream = null\r\n) => {\r\n  if (isScreenSharingActive) {\r\n    switchVideoTracks(localStream);\r\n  } else {\r\n    switchVideoTracks(screenSharingStream);\r\n  }\r\n};\r\n\r\nconst switchVideoTracks = (stream) => {\r\n  for (let socket_id in peers) {\r\n    for (let index in peers[socket_id].streams[0].getTracks()) {\r\n      for (let index2 in stream.getTracks()) {\r\n        if (\r\n          peers[socket_id].streams[0].getTracks()[index].kind ===\r\n          stream.getTracks()[index2].kind\r\n        ) {\r\n          peers[socket_id].replaceTrack(\r\n            peers[socket_id].streams[0].getTracks()[index],\r\n            stream.getTracks()[index2],\r\n            peers[socket_id].streams[0]\r\n          );\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n////////////////////////////////// Messages /////////////////////////////////////\r\nconst appendNewMessage = (messageData) => {\r\n  const messages = store.getState().messages;\r\n  store.dispatch(setMessages([...messages, messageData]));\r\n};\r\n\r\nexport const sendMessageUsingDataChannel = (messageContent) => {\r\n  // append this message locally\r\n  const identity = store.getState().identity;\r\n\r\n  const localMessageData = {\r\n    content: messageContent,\r\n    identity,\r\n    messageCreatedByMe: true,\r\n  };\r\n\r\n  appendNewMessage(localMessageData);\r\n\r\n  const messageData = {\r\n    content: messageContent,\r\n    identity,\r\n  };\r\n\r\n  const stringifiedMessageData = JSON.stringify(messageData);\r\n  for (let socketId in peers) {\r\n    peers[socketId].send(stringifiedMessageData);\r\n  }\r\n};\r\n","import React from \"react\";\r\n\r\nconst ConnectingButton = ({\r\n  createRoomButton = false,\r\n  buttonText,\r\n  onClickHandler,\r\n}) => {\r\n  const buttonClass = createRoomButton\r\n    ? \"create_room_button\"\r\n    : \"join_room_button\";\r\n\r\n  return (\r\n    <button className={buttonClass} onClick={onClickHandler}>\r\n      {buttonText}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default ConnectingButton;\r\n","import React from \"react\";\r\nimport ConnectingButton from \"./ConnectingButton\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst ConnectingButtons = () => {\r\n  let history = useHistory();\r\n\r\n  const pushToJoinRoomPage = () => {\r\n    history.push(\"/join-room\");\r\n  };\r\n\r\n  const pushToJoinRoomPageAsHost = () => {\r\n    history.push(\"/join-room?host=true\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"connecting_buttons_container\">\r\n      <ConnectingButton\r\n        buttonText=\"Join a meeting\"\r\n        onClickHandler={pushToJoinRoomPage}\r\n      />\r\n      <ConnectingButton\r\n        createRoomButton\r\n        buttonText=\"Host a meeting\"\r\n        onClickHandler={pushToJoinRoomPageAsHost}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ConnectingButtons;\r\n","const Actions = {\r\n  SET_IS_ROOM_HOST: \"SET_IS_ROOM_HOST\",\r\n  SET_CONNECT_ONLY_WITH_AUDIO: \"SET_CONNECT_ONLY_WITH_AUDIO\",\r\n  SET_IDENTITY: \"SET_IDENTITY\",\r\n  SET_ROOM_ID: \"SET_ROOM_ID\",\r\n  SET_SHOW_OVERLAY: \"SET_SHOW_OVERLAY\",\r\n  SET_PARTICIPANTS: \"SET_PARTICIPANTS\",\r\n  SET_MESSAGES: \"SET_MESSAGES\",\r\n  SET_ACTIVE_CONVERSATION: 'SET_ACTIVE_CONVERSATION',\r\n  SET_DIRECT_CHAT_HISTORY: 'SET_DIRECT_CHAT_HISTORY',\r\n  SET_SOCKET_ID: 'SET_SOCKET_ID'\r\n};\r\n\r\nexport const setIsRoomHost = (isRoomHost) => {\r\n  return {\r\n    type: Actions.SET_IS_ROOM_HOST,\r\n    isRoomHost,\r\n  };\r\n};\r\n\r\nexport const setConnectOnlyWithAudio = (onlyWithAudio) => {\r\n  return {\r\n    type: Actions.SET_CONNECT_ONLY_WITH_AUDIO,\r\n    onlyWithAudio,\r\n  };\r\n};\r\n\r\nexport const setIdentity = (identity) => {\r\n  return {\r\n    type: Actions.SET_IDENTITY,\r\n    identity,\r\n  };\r\n};\r\n\r\nexport const setRoomId = (roomId) => {\r\n  return {\r\n    type: Actions.SET_ROOM_ID,\r\n    roomId,\r\n  };\r\n};\r\n\r\nexport const setShowOverlay = (showOverlay) => {\r\n  return {\r\n    type: Actions.SET_SHOW_OVERLAY,\r\n    showOverlay,\r\n  };\r\n};\r\n\r\nexport const setParticipants = (participants) => {\r\n  return {\r\n    type: Actions.SET_PARTICIPANTS,\r\n    participants,\r\n  };\r\n};\r\n\r\nexport const setMessages = (messages) => {\r\n  return {\r\n    type: Actions.SET_MESSAGES,\r\n    messages,\r\n  };\r\n};\r\n\r\nexport const setActiveConversation = (activeConversation) => {\r\n  return {\r\n    type: Actions.SET_ACTIVE_CONVERSATION,\r\n    activeConversation\r\n  }\r\n}\r\n\r\nexport const setDirectChatHistory = (directChatHistory) => {\r\n  return {\r\n    type: Actions.SET_DIRECT_CHAT_HISTORY,\r\n    directChatHistory\r\n  }\r\n}\r\n\r\nexport const setSocketId = (socketId) => {\r\n  return {\r\n    type: Actions.SET_SOCKET_ID,\r\n    socketId\r\n  }\r\n}\r\n\r\nexport default Actions;\r\n","import React, { useEffect } from \"react\";\r\nimport logo from \"../resources/images/logo.png\";\r\nimport ConnectingButtons from \"./ConnectingButtons\";\r\nimport { connect } from \"react-redux\";\r\nimport { setIsRoomHost } from \"../store/actions\";\r\n\r\nimport \"./IntroductionPage.css\";\r\n\r\nconst IntroductionPage = ({ setIsRoomHostAction }) => {\r\n  useEffect(() => {\r\n    setIsRoomHostAction(false);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"introduction_page_container\">\r\n      <div className=\"introduction_page_panel\">\r\n        <img src={logo} className=\"introduction_page_image\"></img>\r\n        <ConnectingButtons />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapActionsToProps = (dispatch) => {\r\n  return {\r\n    setIsRoomHostAction: (isRoomHost) => dispatch(setIsRoomHost(isRoomHost)),\r\n  };\r\n};\r\n\r\nexport default connect(null, mapActionsToProps)(IntroductionPage);\r\n","export default \"data:image/png;base64,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\"","import React from \"react\";\r\n\r\nconst JoinRoomTitle = ({ isRoomHost }) => {\r\n  const titleText = isRoomHost ? \"Host meeting\" : \"Join meeting\";\r\n\r\n  return <p className=\"join_room_title\">{titleText}</p>;\r\n};\r\n\r\nexport default JoinRoomTitle;\r\n","import React from \"react\";\r\n\r\nconst Input = ({ placeholder, value, changeHandler }) => {\r\n  return (\r\n    <input\r\n      value={value}\r\n      onChange={changeHandler}\r\n      className=\"join_room_input\"\r\n      placeholder={placeholder}\r\n    />\r\n  );\r\n};\r\n\r\nconst JoinRoomInputs = (props) => {\r\n  const { roomIdValue, setRoomIdValue, nameValue, setNameValue, isRoomHost } =\r\n    props;\r\n\r\n  const handleRoomIdValueChange = (event) => {\r\n    setRoomIdValue(event.target.value);\r\n  };\r\n\r\n  const handleNameValueChange = (event) => {\r\n    setNameValue(event.target.value);\r\n  };\r\n\r\n  return (\r\n    <div className=\"join_room_inputs_container\">\r\n      {!isRoomHost && (\r\n        <Input\r\n          placeholder=\"Enter meeting ID\"\r\n          value={roomIdValue}\r\n          changeHandler={handleRoomIdValueChange}\r\n        />\r\n      )}\r\n      <Input\r\n        placeholder=\"Enter your Name\"\r\n        value={nameValue}\r\n        changeHandler={handleNameValueChange}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default JoinRoomInputs;\r\n","import React from \"react\";\r\nimport CheckImg from \"../resources/images/check.png\";\r\n\r\nconst OnlyWithAudioCheckbox = ({\r\n  connectOnlyWithAudio,\r\n  setConnectOnlyWithAudio,\r\n}) => {\r\n  const handleConnectionTypeChange = () => {\r\n    setConnectOnlyWithAudio(!connectOnlyWithAudio);\r\n  };\r\n\r\n  return (\r\n    <div className=\"checkbox_container\">\r\n      <div className=\"checkbox_connection\" onClick={handleConnectionTypeChange}>\r\n        {connectOnlyWithAudio && (\r\n          <img className=\"checkbox_image\" src={CheckImg}></img>\r\n        )}\r\n      </div>\r\n      <p className=\"checkbox_container_paragraph\">Only audio</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OnlyWithAudioCheckbox;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABiSURBVHgB7ZHBCQAgCEUdpREaoY0boREaoREawQw8hNShFLz04EOHz8MU4OMKIgZKpkTQwrJG6fMNGoRMN52fjMvltI/ryWaJy01Kn7+5k6p3JqTJ5ACLFE2uuUiriezjywAgdcf6AfL4kwAAAABJRU5ErkJggg==\"","import React from \"react\";\r\n\r\nconst ErrorMessage = ({ errorMessage }) => {\r\n  return (\r\n    <div className=\"error_message_container\">\r\n      {errorMessage && (\r\n        <p className=\"error_message_paragraph\">{errorMessage}</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ErrorMessage;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst Button = ({ buttonText, cancelButton = false, onClickHandler }) => {\r\n  const buttonClass = cancelButton\r\n    ? \"join_room_cancel_button\"\r\n    : \"join_room_success_button\";\r\n\r\n  return (\r\n    <button onClick={onClickHandler} className={buttonClass}>\r\n      {buttonText}\r\n    </button>\r\n  );\r\n};\r\n\r\nconst JoinRoomButtons = ({ handleJoinRoom, isRoomHost }) => {\r\n  const successButtonText = isRoomHost ? \"Host\" : \"Join\";\r\n\r\n  const history = useHistory();\r\n\r\n  const pushToIntroductionPage = () => {\r\n    history.push(\"/\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"join_room_buttons_container\">\r\n      <Button buttonText={successButtonText} onClickHandler={handleJoinRoom} />\r\n      <Button\r\n        buttonText=\"Cancel\"\r\n        cancelButton\r\n        onClickHandler={pushToIntroductionPage}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default JoinRoomButtons;\r\n","import axios from \"axios\";\r\n\r\nconst serverApi = \"https://identy.cloud:5000\";\r\n\r\nexport const getRoomExists = async (roomId) => {\r\n  const response = await axios.get(`${serverApi}/api/room-exists/${roomId}`);\r\n  return response.data;\r\n};\r\n\r\nexport const getTURNCredentials = async () => {\r\n  const response = await axios.get(`${serverApi}/api/get-turn-credentials`);\r\n  return response.data;\r\n};\r\n","import React, { useState } from \"react\";\r\nimport JoinRoomInputs from \"./JoinRoomInputs\";\r\nimport { connect } from \"react-redux\";\r\nimport OnlyWithAudioCheckbox from \"./OnlyWithAudioCheckbox\";\r\nimport {\r\n  setConnectOnlyWithAudio,\r\n  setIdentity,\r\n  setRoomId,\r\n} from \"../store/actions\";\r\nimport ErrorMessage from \"./ErrorMessage\";\r\nimport JoinRoomButtons from \"./JoinRoomButtons\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { getRoomExists } from \"../utils/api\";\r\n\r\nconst JoinRoomContent = (props) => {\r\n  const {\r\n    isRoomHost,\r\n    setConnectOnlyWithAudio,\r\n    connectOnlyWithAudio,\r\n    setIdentityAction,\r\n    setRoomIdAction,\r\n  } = props;\r\n\r\n  const [roomIdValue, setRoomIdValue] = useState(\"\");\r\n  const [nameValue, setNameValue] = useState(\"\");\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n\r\n  const history = useHistory();\r\n\r\n  const handleJoinRoom = async () => {\r\n    setIdentityAction(nameValue);\r\n    if (isRoomHost) {\r\n      createRoom();\r\n    } else {\r\n      await joinRoom();\r\n    }\r\n  };\r\n\r\n  const joinRoom = async () => {\r\n    const responseMessage = await getRoomExists(roomIdValue);\r\n\r\n    const { roomExists, full } = responseMessage;\r\n\r\n    if (roomExists) {\r\n      if (full) {\r\n        setErrorMessage(\"Meeting is full. Please try again later.\");\r\n      } else {\r\n        // join a room !\r\n        setRoomIdAction(roomIdValue);\r\n        history.push(\"/room\");\r\n      }\r\n    } else {\r\n      setErrorMessage(\"Meeting not found. Check your meeting id.\");\r\n    }\r\n  };\r\n\r\n  const createRoom = () => {\r\n    history.push(\"/room\");\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <JoinRoomInputs\r\n        roomIdValue={roomIdValue}\r\n        setRoomIdValue={setRoomIdValue}\r\n        nameValue={nameValue}\r\n        setNameValue={setNameValue}\r\n        isRoomHost={isRoomHost}\r\n      />\r\n      <OnlyWithAudioCheckbox\r\n        setConnectOnlyWithAudio={setConnectOnlyWithAudio}\r\n        connectOnlyWithAudio={connectOnlyWithAudio}\r\n      />\r\n      <ErrorMessage errorMessage={errorMessage} />\r\n      <JoinRoomButtons\r\n        handleJoinRoom={handleJoinRoom}\r\n        isRoomHost={isRoomHost}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = (state) => {\r\n  return {\r\n    ...state,\r\n  };\r\n};\r\n\r\nconst mapActionsToProps = (dispatch) => {\r\n  return {\r\n    setConnectOnlyWithAudio: (onlyWithAudio) =>\r\n      dispatch(setConnectOnlyWithAudio(onlyWithAudio)),\r\n    setIdentityAction: (identity) => dispatch(setIdentity(identity)),\r\n    setRoomIdAction: (roomId) => dispatch(setRoomId(roomId)),\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStoreStateToProps,\r\n  mapActionsToProps\r\n)(JoinRoomContent);\r\n","import React, { useEffect } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { setIsRoomHost } from \"../store/actions\";\r\nimport JoinRoomTitle from \"./JoinRoomTitle\";\r\nimport JoinRoomContent from \"./JoinRoomContent\";\r\n\r\nimport \"./JoinRoomPage.css\";\r\n\r\nconst JoinRoomPage = (props) => {\r\n  const { setIsRoomHostAction, isRoomHost } = props;\r\n\r\n  const search = useLocation().search;\r\n\r\n  useEffect(() => {\r\n    const isRoomHost = new URLSearchParams(search).get(\"host\");\r\n    if (isRoomHost) {\r\n      setIsRoomHostAction(true);\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"join_room_page_container\">\r\n      <div className=\"join_room_page_panel\">\r\n        <JoinRoomTitle isRoomHost={isRoomHost} />\r\n        <JoinRoomContent />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = (state) => {\r\n  return {\r\n    ...state,\r\n  };\r\n};\r\n\r\nconst mapActionsToProps = (dispatch) => {\r\n  return {\r\n    setIsRoomHostAction: (isRoomHost) => dispatch(setIsRoomHost(isRoomHost)),\r\n  };\r\n};\r\n\r\nexport default connect(mapStoreStateToProps, mapActionsToProps)(JoinRoomPage);\r\n","import React from \"react\";\n\nconst ChatLabel = () => {\n  return (\n    <div className=\"chat_label_container\">\n      <p className=\"chat_label_paragraph\">CHAT</p>\n    </div>\n  );\n};\n\nexport default ChatLabel;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\n\nconst Message = ({ author, content, sameAuthor, messageCreatedByMe }) => {\n  const alignClass = messageCreatedByMe\n    ? \"message_align_right\"\n    : \"message_align_left\";\n\n  const authorText = messageCreatedByMe ? \"You\" : author;\n\n  const contentAdditionalStyles = messageCreatedByMe\n    ? \"message_right_styles\"\n    : \"message_left_styles\";\n\n  return (\n    <div className={`message_container ${alignClass}`}>\n      {!sameAuthor && <p className=\"message_title\">{authorText}</p>}\n      <p className={`message_content ${contentAdditionalStyles}`}>{content}</p>\n    </div>\n  );\n};\n\nconst Messages = ({ messages }) => {\n  return (\n    <div className=\"messages_container\">\n      {messages.map((message, index) => {\n        const sameAuthor =\n          index > 0 && message.identity === messages[index - 1].identity;\n\n        return (\n          <Message\n            key={`${message.content}${index}`}\n            author={message.identity}\n            content={message.content}\n            sameAuthor={sameAuthor}\n            messageCreatedByMe={message.messageCreatedByMe}\n          />\n        );\n      })}\n    </div>\n  );\n};\n\nconst mapStoreStateToProps = (state) => {\n  return {\n    ...state,\n  };\n};\n\nexport default connect(mapStoreStateToProps)(Messages);\n","export default __webpack_public_path__ + \"static/media/sendMessageButton.9add4f6d.svg\";","import Actions from \"./actions\";\r\n\r\nconst initState = {\r\n  identity: \"\",\r\n  isRoomHost: false,\r\n  connectOnlyWithAudio: false,\r\n  roomId: null,\r\n  showOverlay: true,\r\n  participants: [],\r\n  messages: [],\r\n  activeConversation: null,\r\n  directChatHistory: [],\r\n  socketId: null\r\n};\r\n\r\nconst reducer = (state = initState, action) => {\r\n  switch (action.type) {\r\n    case Actions.SET_IS_ROOM_HOST:\r\n      return {\r\n        ...state,\r\n        isRoomHost: action.isRoomHost,\r\n      };\r\n    case Actions.SET_CONNECT_ONLY_WITH_AUDIO:\r\n      return {\r\n        ...state,\r\n        connectOnlyWithAudio: action.onlyWithAudio,\r\n      };\r\n    case Actions.SET_ROOM_ID:\r\n      return {\r\n        ...state,\r\n        roomId: action.roomId,\r\n      };\r\n    case Actions.SET_IDENTITY:\r\n      return {\r\n        ...state,\r\n        identity: action.identity,\r\n      };\r\n    case Actions.SET_SHOW_OVERLAY:\r\n      return {\r\n        ...state,\r\n        showOverlay: action.showOverlay,\r\n      };\r\n    case Actions.SET_PARTICIPANTS:\r\n      return {\r\n        ...state,\r\n        participants: action.participants,\r\n      };\r\n    case Actions.SET_MESSAGES:\r\n      return {\r\n        ...state,\r\n        messages: action.messages,\r\n      };\r\n    case Actions.SET_ACTIVE_CONVERSATION:\r\n      return {\r\n        ...state,\r\n        activeConversation: action.activeConversation\r\n      }\r\n    case Actions.SET_DIRECT_CHAT_HISTORY:\r\n      return {\r\n        ...state,\r\n        directChatHistory: action.directChatHistory\r\n      };\r\n    case Actions.SET_SOCKET_ID:\r\n      return {\r\n        ...state,\r\n        socketId: action.socketId\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport reducer from \"./reducer\";\n\nexport const store = configureStore({\n  reducer: reducer,\n});\n\nexport default store;\n","import { setDirectChatHistory } from \"../store/actions\";\r\nimport store from \"../store/store\";\r\n\r\nexport const appendNewMessageToChatHistory = (data) => {\r\n  const { isAuthor, receiverSocketId, authorSocketId } = data;\r\n\r\n  if (isAuthor) {\r\n    appendMessageToChatHistory(receiverSocketId, data);\r\n  } else {\r\n    appendMessageToChatHistory(authorSocketId, data);\r\n  }\r\n};\r\n\r\nconst appendMessageToChatHistory = (userSocketId, data) => {\r\n  const chatHistory = [...store.getState().directChatHistory];\r\n\r\n  const userChatHistory = chatHistory.find((h) => h.socketId === userSocketId);\r\n\r\n  if (userChatHistory) {\r\n    const newDirectMessage = {\r\n      isAuthor: data.isAuthor,\r\n      messageContent: data.messageContent,\r\n      identity: data.identity,\r\n    };\r\n\r\n    const newUserChatHistory = {\r\n      ...userChatHistory,\r\n      chatHistory: [...userChatHistory.chatHistory, newDirectMessage],\r\n    };\r\n\r\n    const newChatHistory = [\r\n      ...chatHistory.filter((h) => h.socketId !== userSocketId),\r\n      newUserChatHistory,\r\n    ];\r\n\r\n    store.dispatch(setDirectChatHistory(newChatHistory));\r\n  } else {\r\n    const newUserChatHistory = {\r\n      socketId: userSocketId,\r\n      chatHistory: [\r\n        {\r\n          isAuthor: data.isAuthor,\r\n          messageContent: data.messageContent,\r\n          identity: data.identity,\r\n        },\r\n      ],\r\n    };\r\n\r\n    const newChatHistory = [...chatHistory, newUserChatHistory];\r\n\r\n    store.dispatch(setDirectChatHistory(newChatHistory));\r\n  }\r\n};\r\n","import io from \"socket.io-client\";\r\nimport { setRoomId, setParticipants, setSocketId } from \"../store/actions\";\r\nimport store from \"../store/store\";\r\nimport * as webRTCHandler from \"./webRTCHandler\";\r\nimport { appendNewMessageToChatHistory } from \"./directMessages\";\r\n\r\nconst SERVER = \"https://identy.cloud:5000\";\r\n\r\nlet socket = null;\r\n\r\nexport const connectWithSocketIOServer = () => {\r\n  socket = io(SERVER);\r\n\r\n  socket.on(\"connect\", () => {\r\n    console.log(\"successfully connected with socket io server\");\r\n    console.log(socket.id);\r\n    store.dispatch(setSocketId(socket.id));\r\n  });\r\n\r\n  socket.on(\"room-id\", (data) => {\r\n    const { roomId } = data;\r\n    store.dispatch(setRoomId(roomId));\r\n  });\r\n\r\n  socket.on(\"room-update\", (data) => {\r\n    const { connectedUsers } = data;\r\n    store.dispatch(setParticipants(connectedUsers));\r\n  });\r\n\r\n  socket.on(\"conn-prepare\", (data) => {\r\n    const { connUserSocketId } = data;\r\n\r\n    webRTCHandler.prepareNewPeerConnection(connUserSocketId, false);\r\n\r\n    // inform the user which just join the room that we have prepared for incoming connection\r\n    socket.emit(\"conn-init\", { connUserSocketId: connUserSocketId });\r\n  });\r\n\r\n  socket.on(\"conn-signal\", (data) => {\r\n    webRTCHandler.handleSignalingData(data);\r\n  });\r\n\r\n  socket.on(\"conn-init\", (data) => {\r\n    const { connUserSocketId } = data;\r\n    webRTCHandler.prepareNewPeerConnection(connUserSocketId, true);\r\n  });\r\n\r\n  socket.on(\"user-disconnected\", (data) => {\r\n    webRTCHandler.removePeerConnection(data);\r\n  });\r\n\r\n  socket.on(\"direct-message\", (data) => {\r\n    appendNewMessageToChatHistory(data);\r\n  });\r\n};\r\n\r\nexport const createNewRoom = (identity, onlyAudio) => {\r\n  // emit an event to server that we would like to create new room\r\n  const data = {\r\n    identity,\r\n    onlyAudio,\r\n  };\r\n\r\n  socket.emit(\"create-new-room\", data);\r\n};\r\n\r\nexport const joinRoom = (identity, roomId, onlyAudio) => {\r\n  //emit an event to server that we would to join a room\r\n  const data = {\r\n    roomId,\r\n    identity,\r\n    onlyAudio,\r\n  };\r\n\r\n  socket.emit(\"join-room\", data);\r\n};\r\n\r\nexport const signalPeerData = (data) => {\r\n  socket.emit(\"conn-signal\", data);\r\n};\r\n\r\nexport const sendDirectMessage = (data) => {\r\n  socket.emit(\"direct-message\", data);\r\n};\r\n","import * as api from \"./api\";\n\nlet TURNIceServers = null;\n\nexport const fetchTURNCredentials = async () => {\n  const responseData = await api.getTURNCredentials();\n\n  if (responseData.token?.iceServers) {\n    TURNIceServers = responseData.token.iceServers;\n  }\n\n  return TURNIceServers;\n};\n\nexport const getTurnIceServers = () => {\n  return TURNIceServers;\n};\n","import React, { useState } from \"react\";\nimport SendMessageButton from \"../../resources/images/sendMessageButton.svg\";\nimport * as webRTCHandler from \"../../utils/webRTCHandler\";\n\nconst NewMessage = () => {\n  const [message, setMessage] = useState(\"\");\n\n  const handleTextChange = (event) => {\n    setMessage(event.target.value);\n  };\n\n  const handleKeyPressed = (event) => {\n    if (event.key === \"Enter\") {\n      event.preventDefault();\n\n      // send message to other users\n      sendMessage();\n    }\n  };\n\n  const sendMessage = () => {\n    if (message.length > 0) {\n      webRTCHandler.sendMessageUsingDataChannel(message);\n      setMessage(\"\");\n    }\n  };\n\n  return (\n    <div className=\"new_message_container\">\n      <input\n        className=\"new_message_input\"\n        value={message}\n        onChange={handleTextChange}\n        placeholder=\"Type your message ...\"\n        type=\"text\"\n        onKeyDown={handleKeyPressed}\n      />\n      <img\n        className=\"new_message_button\"\n        src={SendMessageButton}\n        onClick={sendMessage}\n      />\n    </div>\n  );\n};\n\nexport default NewMessage;\n","import React from \"react\";\r\nimport ChatLabel from \"./ChatLabel\";\r\nimport Messages from \"./Messages\";\r\nimport NewMessage from \"./NewMessage\";\r\n\r\nconst ChatSection = () => {\r\n  return (\r\n    <div className=\"chat_section_container\">\r\n      <ChatLabel />\r\n      <Messages />\r\n      <NewMessage />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatSection;\r\n","import React from \"react\";\r\n\r\nconst ParticipantsLabel = () => {\r\n  return (\r\n    <div className=\"participants_label_container\">\r\n      <p className=\"participants_label_paragraph\">PARTICIPANTS</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ParticipantsLabel;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { setActiveConversation } from \"../../store/actions\";\r\n\r\nconst SingleParticipant = (props) => {\r\n  const {\r\n    identity,\r\n    lastItem,\r\n    participant,\r\n    setActiveConversationAction,\r\n    socketId,\r\n  } = props;\r\n\r\n  const handleOpenActiveChatbox = () => {\r\n    if (participant.socketId !== socketId) {\r\n      setActiveConversationAction(participant);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <p className=\"participants_paragraph\" onClick={handleOpenActiveChatbox}>\r\n        {identity}\r\n      </p>\r\n      {!lastItem && <span className=\"participants_separator_line\"></span>}\r\n    </>\r\n  );\r\n};\r\n\r\nconst Participants = ({\r\n  participants,\r\n  setActiveConversationAction,\r\n  socketId,\r\n}) => {\r\n  return (\r\n    <div className=\"participants_container\">\r\n      {participants.map((participant, index) => {\r\n        return (\r\n          <SingleParticipant\r\n            key={participant.identity}\r\n            lastItem={participants.length === index + 1}\r\n            participant={participant}\r\n            identity={participant.identity}\r\n            setActiveConversationAction={setActiveConversationAction}\r\n            socketId={socketId}\r\n          />\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = (state) => {\r\n  return {\r\n    ...state,\r\n  };\r\n};\r\n\r\nconst mapActionsToProps = (dispatch) => {\r\n  return {\r\n    setActiveConversationAction: (activeConversation) =>\r\n      dispatch(setActiveConversation(activeConversation)),\r\n  };\r\n};\r\n\r\nexport default connect(mapStoreStateToProps, mapActionsToProps)(Participants);\r\n","import React, { useEffect, useRef } from \"react\";\r\n\r\nconst SingleMessage = ({ isAuthor, messageContent }) => {\r\n  const messageStyling = isAuthor\r\n    ? \"author_direct_message\"\r\n    : \"receiver_direct_message\";\r\n\r\n  const containerStyling = isAuthor\r\n    ? \"direct_message_container_author\"\r\n    : \"direct_message_container_receiver\";\r\n\r\n  return (\r\n    <div className={containerStyling}>\r\n      <p className={messageStyling}>{messageContent}</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst MessagesContainer = ({ messages }) => {\r\n  const scrollRef = useRef();\r\n\r\n  useEffect(() => {\r\n    if (scrollRef) {\r\n      scrollRef.current.scrollIntoView({ behavior: \"smooth\" });\r\n    }\r\n  }, [messages]);\r\n\r\n  return (\r\n    <div className=\"direct_messages_container\">\r\n      {messages.map((message) => {\r\n        return (\r\n          <SingleMessage\r\n            messageContent={message.messageContent}\r\n            isAuthor={message.isAuthor}\r\n            key={`${message.messageContent}-${message.identity}`}\r\n          />\r\n        );\r\n      })}\r\n      <div ref={scrollRef}></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MessagesContainer;\r\n","import React, { useState } from \"react\";\r\nimport sendMessageButton from \"../../../resources/images/sendMessageButton.svg\";\r\nimport * as wss from \"../../../utils/wss\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst NewMessage = ({ activeConversation, identity }) => {\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const sendMessage = () => {\r\n    wss.sendDirectMessage({\r\n      receiverSocketId: activeConversation.socketId,\r\n      identity: identity,\r\n      messageContent: message,\r\n    });\r\n\r\n    setMessage(\"\");\r\n  };\r\n\r\n  const handleTextChange = (event) => {\r\n    setMessage(event.target.value);\r\n  };\r\n\r\n  const handleKeyPressed = (event) => {\r\n    if (event.key === \"Enter\") {\r\n      event.preventDefault();\r\n      sendMessage();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"new_message_container new_message_direct_border\">\r\n      <input\r\n        className=\"new_message_input\"\r\n        value={message}\r\n        onChange={handleTextChange}\r\n        placeholder=\"Type your message..\"\r\n        type=\"text\"\r\n        onKeyDown={handleKeyPressed}\r\n      />\r\n      <img\r\n        className=\"new_message_button\"\r\n        src={sendMessageButton}\r\n        onClick={sendMessage}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = (state) => {\r\n  return {\r\n    ...state,\r\n  };\r\n};\r\n\r\nexport default connect(mapStoreStateToProps)(NewMessage);\r\n","import React from 'react';\r\n\r\nconst ConversationNotChosen = () => {\r\n    return (\r\n        <div className='conversation_not_chosen_overlay'>\r\n            <p className='conversation_not_chosen_overlay_text'>\r\n                Conversation not chosen\r\n            </p>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ConversationNotChosen;","import React from 'react';\r\n\r\nconst DirectChatHeader = ({ activeConversation }) => {\r\n    return (\r\n        <div className='direct_chat_header'>\r\n            <p className='direct_chat_header_paragraph'>\r\n                {activeConversation ? activeConversation.identity : ''}\r\n            </p>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DirectChatHeader;","import React, { useState, useEffect } from \"react\";\r\nimport MessagesContainer from \"./MessagesContainer\";\r\nimport NewMessage from \"./NewMessage\";\r\nimport ConversationNotChosen from \"./ConversationNotChosen\";\r\nimport { connect } from \"react-redux\";\r\nimport DirectChatHeader from \"./DirectChatHeader\";\r\n\r\nconst getDirectChatHistory = (directChatHistory, socketId = null) => {\r\n  console.log(directChatHistory);\r\n  console.log(socketId);\r\n  if (!socketId || !directChatHistory) {\r\n    return [];\r\n  }\r\n\r\n  const history = directChatHistory.find((h) => h.socketId === socketId);\r\n\r\n  return history ? history.chatHistory : [];\r\n};\r\n\r\nconst DirectChat = ({ activeConversation, directChatHistory }) => {\r\n  const [messages, setMessages] = useState([]);\r\n\r\n  useEffect(() => {\r\n    setMessages(\r\n      getDirectChatHistory(\r\n        directChatHistory,\r\n        activeConversation ? activeConversation.socketId : null\r\n      )\r\n    );\r\n  }, [activeConversation, directChatHistory]);\r\n\r\n  return (\r\n    <div className=\"direct_chat_container\">\r\n      <DirectChatHeader activeConversation={activeConversation} />\r\n      <MessagesContainer messages={messages} />\r\n      <NewMessage />\r\n      {!activeConversation && <ConversationNotChosen />}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = (state) => {\r\n  return {\r\n    ...state,\r\n  };\r\n};\r\n\r\nexport default connect(mapStoreStateToProps)(DirectChat);\r\n","import React from \"react\";\r\nimport ParticipantsLabel from \"./ParticipantsLabel\";\r\nimport Participants from \"./Participants\";\r\nimport DirectChat from './DirectChat/DirectChat';\r\n\r\nconst ParticipantsSection = () => {\r\n  return (\r\n    <div className=\"participants_section_container\">\r\n      <ParticipantsLabel />\r\n      <Participants />\r\n      <DirectChat />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ParticipantsSection;\r\n","export default __webpack_public_path__ + \"static/media/camera.b50348a3.svg\";","export default __webpack_public_path__ + \"static/media/cameraOff.a61d4a02.svg\";","import React, { useState } from \"react\";\r\n\r\nimport CameraButtonImg from \"../../resources/images/camera.svg\";\r\nimport CameraButtonImgOff from \"../../resources/images/cameraOff.svg\";\r\nimport * as webRTCHandler from \"../../utils/webRTCHandler\";\r\n\r\nconst CameraButton = () => {\r\n  const [isLocalVideoDisabled, setIsLocalVideoDisabled] = useState(false);\r\n\r\n  const handleCameraButtonPressed = () => {\r\n    webRTCHandler.toggleCamera(isLocalVideoDisabled);\r\n\r\n    setIsLocalVideoDisabled(!isLocalVideoDisabled);\r\n  };\r\n\r\n  return (\r\n    <div className=\"video_button_container\">\r\n      <img\r\n        src={isLocalVideoDisabled ? CameraButtonImgOff : CameraButtonImg}\r\n        className=\"video_button_image\"\r\n        onClick={handleCameraButtonPressed}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CameraButton;\r\n","import React from \"react\";\r\n\r\nconst LeaveRoomButton = () => {\r\n  const handleRoomDisconnection = () => {\r\n    const siteUrl = window.location.origin;\r\n    window.location.href = siteUrl;\r\n  };\r\n\r\n  return (\r\n    <div className=\"video_button_container\">\r\n      <button className=\"video_button_end\" onClick={handleRoomDisconnection}>\r\n        Leave Room\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LeaveRoomButton;\r\n","export default __webpack_public_path__ + \"static/media/mic.c9c9788e.svg\";","export default __webpack_public_path__ + \"static/media/micOff.3a72f682.svg\";","import React, { useState } from \"react\";\r\nimport MicButtonImg from \"../../resources/images/mic.svg\";\r\nimport MicButtonImgOff from \"../../resources/images/micOff.svg\";\r\nimport * as webRTCHandler from \"../../utils/webRTCHandler\";\r\n\r\nconst MicButton = () => {\r\n  const [isMicMuted, setIsMicMuted] = useState(false);\r\n\r\n  const handleMicButtonPressed = () => {\r\n    webRTCHandler.toggleMic(isMicMuted);\r\n\r\n    setIsMicMuted(!isMicMuted);\r\n  };\r\n\r\n  return (\r\n    <div className=\"video_button_container\">\r\n      <img\r\n        src={isMicMuted ? MicButtonImgOff : MicButtonImg}\r\n        onClick={handleMicButtonPressed}\r\n        className=\"video_button_image\"\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MicButton;\r\n","export default __webpack_public_path__ + \"static/media/switchToScreenSharing.900d9338.svg\";","import React, { useRef, useEffect } from \"react\";\n\nconst LocalScreenSharingPreview = ({ stream }) => {\n  const localPreviewRef = useRef();\n\n  useEffect(() => {\n    const video = localPreviewRef.current;\n\n    video.srcObject = stream;\n\n    video.onloadedmetadata = () => {\n      video.play();\n    };\n  }, [stream]);\n\n  return (\n    <div className=\"local_screen_share_preview\">\n      <video muted autoPlay ref={localPreviewRef}></video>\n    </div>\n  );\n};\n\nexport default LocalScreenSharingPreview;\n","import React, { useState } from \"react\";\r\nimport SwitchImg from \"../../resources/images/switchToScreenSharing.svg\";\r\nimport LocalScreenSharingPreview from \"./LocalScreenSharingPreview\";\r\nimport * as webRTCHandler from \"../../utils/webRTCHandler\";\r\n\r\nconst constraints = {\r\n  audio: false,\r\n  video: true,\r\n};\r\n\r\nconst SwitchToScreenSharingButton = () => {\r\n  const [isScreenSharingActive, setIsScreenSharingActive] = useState(false);\r\n  const [screenSharingStream, setScreenSharingStream] = useState(null);\r\n\r\n  const handleScreenShareToggle = async () => {\r\n    if (!isScreenSharingActive) {\r\n      let stream = null;\r\n      try {\r\n        stream = await navigator.mediaDevices.getDisplayMedia(constraints);\r\n      } catch (err) {\r\n        console.log(\r\n          \"error occurred when trying to get an access to screen share stream\"\r\n        );\r\n      }\r\n      if (stream) {\r\n        setScreenSharingStream(stream);\r\n\r\n        webRTCHandler.toggleScreenShare(isScreenSharingActive, stream);\r\n        setIsScreenSharingActive(true);\r\n        // execute here function to switch the video track which we are sending to other users\r\n      }\r\n    } else {\r\n      webRTCHandler.toggleScreenShare(isScreenSharingActive);\r\n      setIsScreenSharingActive(false);\r\n\r\n      // stop screen share stream\r\n      screenSharingStream.getTracks().forEach((t) => t.stop());\r\n      setScreenSharingStream(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"video_button_container\">\r\n        <img\r\n          src={SwitchImg}\r\n          onClick={handleScreenShareToggle}\r\n          className=\"video_button_image\"\r\n        />\r\n      </div>\r\n      {isScreenSharingActive && (\r\n        <LocalScreenSharingPreview stream={screenSharingStream} />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SwitchToScreenSharingButton;\r\n","import React from \"react\";\r\nimport CameraButton from \"./CameraButton\";\r\nimport LeaveRoomButton from \"./LeaveRoomButton\";\r\nimport MicButton from \"./MicButton\";\r\nimport SwitchToScreenSharingButton from \"./SwitchToScreenSharingButton\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst VideoButtons = (props) => {\r\n  const { connectOnlyWithAudio } = props;\r\n\r\n  return (\r\n    <div className=\"video_buttons_container\">\r\n      <MicButton />\r\n      {!connectOnlyWithAudio && <CameraButton />}\r\n      <LeaveRoomButton />\r\n      {!connectOnlyWithAudio && <SwitchToScreenSharingButton />}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = (state) => {\r\n  return {\r\n    ...state,\r\n  };\r\n};\r\n\r\nexport default connect(mapStoreStateToProps)(VideoButtons);\r\n","import React from \"react\";\r\nimport VideoButtons from \"./VideoButtons\";\r\n\r\nconst VideoSection = () => {\r\n  return (\r\n    <div className=\"video_section_container\">\r\n      <VideoButtons />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VideoSection;\r\n","import React from \"react\";\r\n\r\nconst RoomLabel = ({ roomId }) => {\r\n  return (\r\n    <div className=\"room_label\">\r\n      <p className=\"room_label_paragraph\">ID: {roomId} </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RoomLabel;\r\n","import React from \"react\";\r\n\r\nconst Overlay = () => {\r\n  return (\r\n    <div className=\"overlay_container\">\r\n      <div className=\"loader\"></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Overlay;\r\n","import React, { useEffect } from \"react\";\r\nimport ChatSection from \"./ChatSection/ChatSection\";\r\nimport ParticipantsSection from \"./ParticipantsSection/ParticipantsSection\";\r\nimport VideoSection from \"./VideoSection/VideoSection\";\r\nimport RoomLabel from \"./RoomLabel\";\r\nimport { connect } from \"react-redux\";\r\nimport * as webRTCHandler from \"../utils/webRTCHandler\";\r\nimport Overlay from \"./Overlay\";\r\n\r\nimport \"./RoomPage.css\";\r\n\r\nconst RoomPage = ({\r\n  roomId,\r\n  identity,\r\n  isRoomHost,\r\n  showOverlay,\r\n  connectOnlyWithAudio,\r\n}) => {\r\n  useEffect(() => {\r\n    if (!isRoomHost && !roomId) {\r\n      const siteUrl = window.location.origin;\r\n      window.location.href = siteUrl;\r\n    } else {\r\n      webRTCHandler.getLocalPreviewAndInitRoomConnection(\r\n        isRoomHost,\r\n        identity,\r\n        roomId,\r\n        connectOnlyWithAudio\r\n      );\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"room_container\">\r\n      <ParticipantsSection />\r\n      <VideoSection />\r\n      <ChatSection />\r\n      <RoomLabel roomId={roomId} />\r\n      {showOverlay && <Overlay />}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = (state) => {\r\n  return {\r\n    ...state,\r\n  };\r\n};\r\n\r\nexport default connect(mapStoreStateToProps)(RoomPage);\r\n","import React, { useEffect } from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport IntroductionPage from \"./IntroductionPage/IntroductionPage\";\nimport JoinRoomPage from \"./JoinRoomPage/JoinRoomPage\";\nimport RoomPage from \"./RoomPage/RoomPage\";\nimport { connectWithSocketIOServer } from \"./utils/wss\";\n\nimport \"./App.css\";\n\nfunction App() {\n  useEffect(() => {\n    connectWithSocketIOServer();\n  }, []);\n\n  return (\n    <Router>\n      <Switch>\n        <Route path=\"/join-room\">\n          <JoinRoomPage />\n        </Route>\n        <Route path=\"/room\">\n          <RoomPage />\n        </Route>\n        <Route path=\"/\">\n          <IntroductionPage />\n        </Route>\n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { store } from './store/store';\nimport { Provider } from 'react-redux';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}